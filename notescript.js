$(document).ready(function(){function b(){document.title="HTML5Notes";a();$(".noteviewer").fadeOut("slow");$("section ul").slideDown("slow");window.location.hash="home"}$(window).hashchange(function(){newHash=window.location.hash.substring(1);if(newHash===""||newHash==="home"){return false}value=JSON.parse(localStorage.getItem(newHash));if(value!==null){document.title="HTML5Notes - "+value.note[0].data.title;$("section ul").slideUp("slow");$("#notesection").html("<h2>"+value.note[0].data.title+"</h2> <time>Created on "+value.note[0].data.date+" at "+value.note[0].data.time+"</time> <p>"+value.note[0].data.note+"</p>");$("#notesection").append(function(){return $('<a href="#" >Delete</a>').click(function(){localStorage.removeItem(value.note[0].data.id);b();return false})});$(".noteviewer").fadeIn("slow")}});$("#addnote").click(function(){$("#newnote").fadeIn("slow");return false});function a(){if(localStorage.length===0){$("section ul").html("<h1>Looks like there are no notes. Add some!</h1>");return false}$("section ul").empty();var d,e;for(var c=0;c<localStorage.length;c++){d=localStorage.key(c);e=JSON.parse(localStorage.getItem(d));$("section ul").append("<li><h2>"+e.note[0].data.title+"</h2> <time>Created on "+e.note[0].data.date+" at "+e.note[0].data.time+'</time> <a href="#'+e.note[0].data.id+'">View Note</a></li>')}}$("#submitnote").click(function(){var m=$("#notetitle").val();var j=$("#notetext").val();if(m!==""&&j!==""){var j=j.replace(/(\r\n|\n|\r)/gm,"<br>");var c=Math.floor(Math.random()*90000);if(localStorage.getItem(c)!==null){var c=Math.floor(Math.random()*90000)}var d=new Date();var i=d.getMonth()+1;var l=d.getDate();var k=d.getFullYear();var n=d.getHours();var h=d.getMinutes();if(h<10){h="0"+h}var f=i+"/"+l+"/"+k;var e=n+":"+h;var g={note:[{data:{note:j,title:m,id:c,date:f,time:e,}}]};localStorage.setItem(c,JSON.stringify(g));a();$("#newnote").fadeOut("slow");$("#notetext").val("");$("#notetitle").val("")}});$("#closenewnote").click(function(){$("#newnote").fadeOut("slow");return false});$(".back").click(function(){b();return false});$("header h1").click(function(){b()});$("#deleteall").click(function(){localStorage.clear();b();return false});$("body").click(function(c){if(!$(c.target).closest("#newnote").length){$("#newnote").fadeOut("slow")}});a();$(window).hashchange()});